import{$a as E,E as v,Ja as C,Q as m,R as g,U as h,Ua as w,V as y,Xa as O,Y as d,Za as i,_a as k,aa as b,bb as j,d as S,db as N,eb as q,f as x,fa as r,g as F,ga as n,ha as l,kb as P,ma as _,mb as A,na as T,ob as G,q as D,qa as p,sa as I,sb as $,u as f,wb as z,x as s,yb as B}from"./chunk-WTVOD2ZT.js";function R(e,M){e&1&&(r(0,"div",9),p(1,"You must accept the conditions."),n())}function V(e,M){e&1&&(r(0,"div",9),p(1,"Debe aceptar la pol\xEDtica."),n())}function H(e,M){if(e&1&&(r(0,"div",2),p(1),n()),e&2){let t=T();m(),I(" ",t.paymentMessage," ")}}var J=(()=>{class e{fb;formReady=new v;paymentSubmit=new v;paymentForm;formSubscription;metodoPagoDropdown={id:"metodoPago",label:"Metodo de Pago",options:[{label:"Tarjeta de Cr\xE9dito",value:"tarjetaCredito"},{label:"PayPal",value:"paypal"}],formControlName:"metodoPago"};correoInput={id:"correo",label:"Correo electr\xF3nico",placeholder:"",value:"",type:"email",formControlName:"correo",required:!0,disabled:!1};prefijoTelefonoDropdown={id:"prefijoTelefono",label:"Prefijo telef\xF3nico del pa\xEDs",options:[{label:"Ecuador (+593)",value:"+593"},{label:"Espa\xF1a (+34)",value:"+34"},{label:"Afganist\xE1n (+93)",value:"+93"},{label:"Albania (+355)",value:"+355"},{label:"Alemania (+49)",value:"+49"},{label:"Andorra (+376)",value:"+376"},{label:"Angola (+244)",value:"+244"},{label:"Anguila (+1264)",value:"+1264"},{label:"Bolivia (+591)",value:"+591"},{label:"Brasil (+55)",value:"+55"},{label:"Chile (+56)",value:"+56"},{label:"Colombia (+57)",value:"+57"},{label:"Per\xFA (+51)",value:"+51"},{label:"Venezuela (+58)",value:"+58"},{label:"Argentina (+54)",value:"+54"},{label:"Uruguay (+598)",value:"+598"}],formControlName:"prefijoTelefono"};numeroTelefonoInput={id:"numeroTelefono",label:"N\xFAmero de tel\xE9fono",placeholder:"",value:"",type:"number",formControlName:"numeroTelefono",required:!0,disabled:!1};numeroTarjetaInput={id:"numeroTarjeta",label:"N\xFAmero de tarjeta",placeholder:"",value:"",type:"number",formControlName:"numeroTarjeta",required:!0,disabled:!1};fechaCaducidadMesInput={id:"fechaCaducidadMes",label:"Fecha de caducidad (MM)",placeholder:"",value:"",type:"number",formControlName:"fechaCaducidadMes",required:!0,disabled:!1};fechaCaducidadAnioInput={id:"fechaCaducidadAnio",label:"Fecha de caducidad (AA)",placeholder:"",value:"",type:"number",formControlName:"fechaCaducidadAnio",required:!0,disabled:!1};cvcInput={id:"cvc",label:"CVC/CVV",placeholder:"",value:"",type:"number",formControlName:"cvc",required:!0,disabled:!1};constructor(t){this.fb=t}ngOnInit(){this.paymentForm=this.fb.group({metodoPago:["",i.required],correo:["",[i.required,i.email]],prefijoTelefono:["",i.required],numeroTelefono:["",[i.required,i.pattern(/^\d{9}$/)]],numeroTarjeta:["",[i.required,i.pattern(/^\d{16}$/)]],fechaCaducidadMes:["",[i.required,i.pattern(/^(0[1-9]|1[0-2])$/)]],fechaCaducidadAnio:["",[i.required,i.pattern(/^\d{2}$/)]],cvc:["",[i.required,i.pattern(/^\d{3,4}$/)]],aceptarTerminos:[!1,i.requiredTrue],aceptarPrivacidad:[!1,i.requiredTrue]}),this.formReady.emit(this.paymentForm),this.formSubscription=this.paymentForm.valueChanges.subscribe(t=>{})}ngOnDestroy(){this.formSubscription&&this.formSubscription.unsubscribe()}onSubmit(){this.paymentForm.valid?this.paymentSubmit.emit(this.paymentForm):Object.values(this.paymentForm.controls).forEach(t=>{t.markAsTouched()})}static \u0275fac=function(a){return new(a||e)(g(P))};static \u0275cmp=h({type:e,selectors:[["lib-payment-form"]],outputs:{formReady:"formReady",paymentSubmit:"paymentSubmit"},decls:36,vars:20,consts:[[1,"payment-form",3,"ngSubmit","formGroup"],[1,"grid"],[1,"col-12"],[3,"dropdownData","formGroup"],[3,"inputData","formGroup"],[1,"col-6"],[1,"payment-form__group"],[1,"payment-form__checkbox-label"],["type","checkbox","formControlName","aceptarTerminos",1,"payment-form__checkbox"],[1,"error-message"],["type","checkbox","formControlName","aceptarPrivacidad",1,"payment-form__checkbox"],["type","submit",1,"payment-form__button",3,"disabled"]],template:function(a,o){if(a&1&&(r(0,"form",0),_("ngSubmit",function(){return o.onSubmit()}),r(1,"div",1)(2,"div",2),l(3,"app-dropdown",3),n()(),r(4,"div",1)(5,"div",2),l(6,"app-input",4),n()(),r(7,"div",1)(8,"div",2),l(9,"app-dropdown",3),n()(),r(10,"div",1)(11,"div",2),l(12,"app-input",4),n()(),r(13,"div",1)(14,"div",2),l(15,"app-input",4),n()(),r(16,"div",1)(17,"div",5),l(18,"app-input",4),n(),r(19,"div",5),l(20,"app-input",4),n()(),r(21,"div",1)(22,"div",2),l(23,"app-input",4),n()(),r(24,"div",6)(25,"label",7),l(26,"input",8),p(27," I accept the Booking Conditions, etc. "),n(),y(28,R,2,0,"div",9),n(),r(29,"div",6)(30,"label",7),l(31,"input",10),p(32," I accept the Privacy Policy. "),n(),y(33,V,2,0,"div",9),n(),r(34,"button",11),p(35,"Proccess payment"),n()()),a&2){let u,c;d("formGroup",o.paymentForm),m(3),d("dropdownData",o.metodoPagoDropdown)("formGroup",o.paymentForm),m(3),d("inputData",o.correoInput)("formGroup",o.paymentForm),m(3),d("dropdownData",o.prefijoTelefonoDropdown)("formGroup",o.paymentForm),m(3),d("inputData",o.numeroTelefonoInput)("formGroup",o.paymentForm),m(3),d("inputData",o.numeroTarjetaInput)("formGroup",o.paymentForm),m(3),d("inputData",o.fechaCaducidadMesInput)("formGroup",o.paymentForm),m(2),d("inputData",o.fechaCaducidadAnioInput)("formGroup",o.paymentForm),m(3),d("inputData",o.cvcInput)("formGroup",o.paymentForm),m(5),b((u=o.paymentForm.get("aceptarTerminos"))!=null&&u.errors&&((u=o.paymentForm.get("aceptarTerminos"))!=null&&u.touched)?28:-1),m(5),b((c=o.paymentForm.get("aceptarPrivacidad"))!=null&&c.errors&&((c=o.paymentForm.get("aceptarPrivacidad"))!=null&&c.touched)?33:-1),m(),d("disabled",!o.paymentForm.valid)}},dependencies:[C,A,j,O,k,E,N,q,z,$],styles:[".payment-form[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:0 auto;padding:20px;background-color:#fff;border:1px solid #ddd;border-radius:10px;box-shadow:0 2px 5px #0000001a;font-family:Roboto,sans-serif}.payment-form__group[_ngcontent-%COMP%]{margin-bottom:10px}.payment-form__label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-size:.9em;color:#333}.payment-form__input[_ngcontent-%COMP%], .payment-form__select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;font-size:14px;box-sizing:border-box;font-family:Roboto,sans-serif;color:#333;background-color:#fff}.payment-form__select[_ngcontent-%COMP%]{cursor:pointer}.payment-form__expiration-date[_ngcontent-%COMP%]{display:flex;align-items:center}.payment-form__expiration-date[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:50px;margin-right:5px}.payment-form__checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px;font-size:.9em;color:#333}.payment-form__checkbox[_ngcontent-%COMP%]{margin-right:5px}.payment-form__button[_ngcontent-%COMP%]{background-color:#639;color:#fff;padding:12px 20px;border:none;border-radius:5px;cursor:pointer;font-size:18px;transition:background-color .2s ease}.payment-form__button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.payment-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;font-size:.8em;margin-top:5px}"]})}return e})(),L=(()=>{class e{state(t){return{$:()=>t.asObservable(),snapshot:()=>this.immutabilize(t.getValue()),set:a=>t.next(this.immutabilize(a))}}immutabilize(t){return JSON.parse(JSON.stringify(t))}static \u0275fac=function(a){return new(a||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),U=(()=>{class e{_factory=s(L);_methodPay$=new x(null);store(){return{methodPay:this._factory.state(this._methodPay$)}}static \u0275fac=function(a){return new(a||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Y=(()=>{class e{_pay=s(U);get pay(){return this._pay.store()}static \u0275fac=function(a){return new(a||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),K=(()=>{class e{_state=s(Y);subscriptions;getMethodPay$(){return this._state.pay.methodPay.$()}initSubscriptions(){this.subscriptions=new S}destroySubscriptions(){this.subscriptions.unsubscribe()}execute(t){this.subscriptions.add(this._state.pay.methodPay.set(t))}static \u0275fac=function(a){return new(a||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Q=(()=>{class e{fb;paymentForm;processingPayment=!1;paymentMessage="";headerService=s(G);_useCaseMethodPay=s(K);router=s(w);methodPay$;constructor(t){this.fb=t,this.headerService.sendBookingHeader({title:"Pago",subtitle:"Informacion de contacto y pago."})}ngOnDestroy(){this._useCaseMethodPay.destroySubscriptions()}ngOnInit(){this._useCaseMethodPay.initSubscriptions(),this.methodPay$=this._useCaseMethodPay.getMethodPay$()}onPaymentSubmit(t){t.valid?(this.processingPayment=!0,F(this._useCaseMethodPay.execute(t.value.metodoPago)).pipe(D(()=>this.methodPay$)).subscribe(),this.paymentMessage="Processing payment...",this.router.navigate(["/booking"]),setTimeout(()=>{this.processingPayment=!1},2e3)):this.paymentMessage="Please complete all required fields....."}static \u0275fac=function(a){return new(a||e)(g(P))};static \u0275cmp=h({type:e,selectors:[["lib-payment"]],decls:5,vars:1,consts:[[1,"payment-container"],[3,"paymentSubmit"],["role","alert",1,"payment-message"]],template:function(a,o){a&1&&(r(0,"div",0)(1,"h2"),p(2,"Paga tu reserva de forma segura"),n(),r(3,"lib-payment-form",1),_("paymentSubmit",function(c){return o.onPaymentSubmit(c)}),n(),y(4,H,2,1,"div",2),n()),a&2&&(m(4),b(o.processingPayment?4:-1))},dependencies:[J,C],styles:[".payment-container[_ngcontent-%COMP%]{width:500px;margin:15px auto;padding:20px;border:1px solid #ccc;border-radius:5px;background-color:#fff}.payment-message[_ngcontent-%COMP%]{margin-top:20px;padding:15px;border:1px solid #ddd;border-radius:4px;background-color:#f0f0f0;font-size:16px}h2[_ngcontent-%COMP%]{text-align:center;color:#2d69e1;margin:7px auto}"]})}return e})(),le=[{path:"",component:B,children:[{path:"",component:Q}]}];export{K as a,le as b};
