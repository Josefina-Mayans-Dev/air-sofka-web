import{c as ee}from"./chunk-SRAEFGWB.js";import{$a as z,A as I,E as g,Ea as q,Ja as F,Q as a,R as T,U as S,Ua as B,V as y,Xa as R,Y as p,Za as i,_ as V,_a as A,aa as w,ba as O,bb as G,d as v,da as k,db as U,ea as $,eb as H,f as j,fa as s,g as C,ga as n,ha as c,ka as N,kb as J,lb as K,ma as _,mb as Q,na as b,oa as E,ob as W,pa as L,q as x,qa as m,sa as M,sb as X,u,wb as Y,x as l,yb as Z,z as P}from"./chunk-WTVOD2ZT.js";var te=["*"];function oe(t,f){if(t&1&&(s(0,"div",7),m(1),n()),t&2){let e=f.$implicit,o=f.index,r=b();V("stepper__step--active",o===r.currentStepIndex),a(),M(" ",e," ")}}function re(t,f){t&1&&(s(0,"div",10),m(1,"Acepte terminos y condiciones"),n())}function ne(t,f){if(t&1&&(s(0,"div",5)(1,"h3",6),m(2,"Persona de Contacto"),n(),s(3,"div",1)(4,"div",2),c(5,"app-input",4),n()(),s(6,"div",1)(7,"div",2),c(8,"app-input",4),n()(),s(9,"div",1)(10,"div",2),c(11,"app-dropdown",3),n()(),s(12,"div",1)(13,"div",2),c(14,"app-input",4),n()(),s(15,"div",7)(16,"label",8),c(17,"input",9),s(18,"span"),m(19,"Entiendo y acepto que mis datos personales ser\xE1n tratados de acuerdo con la pol\xEDtica de privacidad de AIR EUROPA."),n(),y(20,re,2,0,"div",10),n()()()),t&2){let e,o=b();a(5),p("inputData",o.correoInput)("formGroup",o.pasajeroForm),a(3),p("inputData",o.correoConfirmarInput)("formGroup",o.pasajeroForm),a(3),p("dropdownData",o.prefijoTelefonoDropdown)("formGroup",o.pasajeroForm),a(3),p("inputData",o.numeroTelefonoInput)("formGroup",o.pasajeroForm),a(6),w((e=o.pasajeroForm.get("aceptaTerminos"))!=null&&e.errors&&((e=o.pasajeroForm.get("aceptaTerminos"))!=null&&e.touched)?20:-1)}}function se(t,f){if(t&1){let e=N();s(0,"lib-passenger-form",2),_("formValuesChange",function(r){P(e);let d=b();return I(d.updateStep(r))})("formReady",function(r){let d=P(e).$index,h=b();return I(h.onFormReady(r,d))}),n()}if(t&2){let e=f.$index,o=b();p("isFirst",e===0)("hidden",o.currentStepIndex!==e)}}var ie=(()=>{class t{steps=[];isNextButtonDisabled=!1;stepChange=new g;complete=new g;formUpdated=new g;currentStepIndex=0;ngOnInit(){}goToPreviousStep(){this.currentStepIndex>0&&(this.currentStepIndex--,this.stepChange.emit(this.currentStepIndex))}goToNextStep(){this.currentStepIndex<this.steps.length-1?(this.currentStepIndex++,this.stepChange.emit(this.currentStepIndex)):this.complete.emit()}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=S({type:t,selectors:[["lib-stepper"]],inputs:{steps:"steps",isNextButtonDisabled:"isNextButtonDisabled"},outputs:{stepChange:"stepChange",complete:"complete",formUpdated:"formUpdated"},ngContentSelectors:te,decls:10,vars:4,consts:[[1,"stepper"],[1,"stepper__steps"],["class","stepper__step",3,"stepper__step--active",4,"ngFor","ngForOf"],[1,"stepper__content"],[1,"stepper__actions"],[1,"stepper__button","stepper__button--previous",3,"click","disabled"],[1,"stepper__button","stepper__button--next",3,"click","disabled"],[1,"stepper__step"]],template:function(o,r){o&1&&(E(),s(0,"div",0)(1,"div",1),y(2,oe,2,3,"div",2),n(),s(3,"div",3),L(4),n(),s(5,"div",4)(6,"button",5),_("click",function(){return r.goToPreviousStep()}),m(7," Pasajero anterior "),n(),s(8,"button",6),_("click",function(){return r.goToNextStep()}),m(9),n()()()),o&2&&(a(2),p("ngForOf",r.steps),a(4),p("disabled",r.currentStepIndex===0),a(2),p("disabled",r.isNextButtonDisabled),a(),M(" ",r.currentStepIndex===r.steps.length-1?"Completar":"Siguiente"," "))},dependencies:[F,q],styles:[".stepper[_ngcontent-%COMP%]{width:930px;background-color:#f5f6fa;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:15px;font-family:Roboto,sans-serif;margin:15px auto}.stepper__steps[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:8px;margin:20px auto;width:95%}.stepper__step[_ngcontent-%COMP%]{flex:1;text-align:center;padding:10px;border-bottom:1px solid #ccc;cursor:pointer;border-radius:8px;background-color:#fff}.stepper__step--active[_ngcontent-%COMP%]{background-color:#2d69e1;color:#fff;border-color:#2d69e1;box-shadow:0 2px 4px #0003}.stepper__content[_ngcontent-%COMP%]{margin-bottom:20px}.stepper__actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:20px auto;width:95%}.stepper__button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;background-color:#2d69e1;color:#fff;cursor:pointer;font-size:16px;box-shadow:0 2px 4px #0000001a;transition:background-color .2s ease}.stepper__button[_ngcontent-%COMP%]:hover{background-color:#1b52c0;box-shadow:0 4px 6px #0003}.stepper__button[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:gray;cursor:not-allowed;box-shadow:none}"]})}return t})(),ae=(()=>{class t{fb;index=0;isFirst=!1;formReady=new g;formValuesChange=new g;pasajeroForm;formSubscription;dropdowTratamiento={id:"tratamiento",label:"Tratamiento",options:[{label:"Sr",value:"Sr."},{label:"Sra",value:"Sra."}],formControlName:"tratamiento"};nombreInput={id:"nombre",label:"Nombre",placeholder:"",value:"",type:"text",formControlName:"nombre",required:!0,disabled:!1};apellidoInput={id:"apellido",label:"Apellido",placeholder:"",value:"",type:"text",formControlName:"apellido",required:!0,disabled:!1};correoInput={id:"correo",label:"Correo electr\xF3nico",placeholder:"",value:"",type:"email",formControlName:"correo",required:!0,disabled:!1};correoConfirmarInput={id:"correoConfirmar",label:"Confirmar correo electr\xF3nico",placeholder:"",value:"",type:"email",formControlName:"correoConfirmar",required:!0,disabled:!1};numeroTelefonoInput={id:"numeroTelefono",label:"N\xFAmero de tel\xE9fono",placeholder:"",value:"",type:"number",formControlName:"numeroTelefono",required:!0,disabled:!1};prefijoTelefonoDropdown={id:"prefijoTelefono",label:"Prefijo telef\xF3nico del pa\xEDs",options:[{label:"Ecuador (+593)",value:"+593"},{label:"Espa\xF1a (+34)",value:"+34"},{label:"Afganist\xE1n (+93)",value:"+93"},{label:"Albania (+355)",value:"+355"},{label:"Alemania (+49)",value:"+49"},{label:"Andorra (+376)",value:"+376"},{label:"Angola (+244)",value:"+244"},{label:"Anguila (+1264)",value:"+1264"},{label:"Bolivia (+591)",value:"+591"},{label:"Brasil (+55)",value:"+55"},{label:"Chile (+56)",value:"+56"},{label:"Colombia (+57)",value:"+57"},{label:"Per\xFA (+51)",value:"+51"},{label:"Venezuela (+58)",value:"+58"},{label:"Argentina (+54)",value:"+54"},{label:"Uruguay (+598)",value:"+598"}],formControlName:"prefijoTelefono"};constructor(e){this.fb=e}ngOnInit(){this.pasajeroForm=this.fb.group({tratamiento:["",i.required],nombre:["",i.required],apellido:["",i.required],correo:[""],correoConfirmar:[""],prefijoTelefono:[""],numeroTelefono:[""],aceptaTerminos:[!1]}),this.isFirst&&this.addContactoValidators(),this.formReady.emit(this.pasajeroForm),this.formSubscription=this.pasajeroForm.valueChanges.subscribe(e=>{this.pasajeroForm.valid?this.formValuesChange.emit({valid:!0,values:e}):this.formValuesChange.emit({valid:!1})})}ngOnDestroy(){this.formSubscription&&this.formSubscription.unsubscribe()}addContactoValidators(){this.pasajeroForm.controls.correo.addValidators([i.required,i.email]),this.pasajeroForm.controls.correoConfirmar.addValidators([i.required,i.email]),this.pasajeroForm.controls.prefijoTelefono.addValidators(i.required),this.pasajeroForm.controls.numeroTelefono.addValidators([i.required,i.pattern("^[0-9]{9}$")]),this.pasajeroForm.controls.aceptaTerminos.addValidators(i.requiredTrue),this.pasajeroForm.setValidators(this.emailMatchValidator()),this.pasajeroForm.updateValueAndValidity()}removeContactoValidators(){this.pasajeroForm.controls.correo.removeValidators(i.required),this.pasajeroForm.controls.correoConfirmar.removeValidators(i.required),this.pasajeroForm.controls.prefijoTelefono.removeValidators(i.required),this.pasajeroForm.controls.numeroTelefono.removeValidators(i.required),this.pasajeroForm.controls.aceptaTerminos.removeValidators(i.required),this.pasajeroForm.controls.aceptaTerminos.setValue(!1),this.pasajeroForm.updateValueAndValidity()}emailMatchValidator(){return e=>{let o=e.get("correo")?.value,r=e.get("correoConfirmar")?.value;return o&&r&&o!==r?{emailMismatch:!0}:null}}static \u0275fac=function(o){return new(o||t)(T(J))};static \u0275cmp=S({type:t,selectors:[["lib-passenger-form"]],inputs:{index:"index",isFirst:"isFirst"},outputs:{formReady:"formReady",formValuesChange:"formValuesChange"},decls:11,vars:8,consts:[[1,"pasajero-form",3,"formGroup"],[1,"grid"],[1,"col-5"],[3,"dropdownData","formGroup"],[3,"inputData","formGroup"],[1,"pasajero-form__contacto"],[1,"pasajero-form__contacto-title"],[1,"form-group","terminos-condiciones"],[1,"pasajero-form__checkbox-label"],["type","checkbox","formControlName","aceptaTerminos"],[1,"error-message"]],template:function(o,r){o&1&&(s(0,"form",0)(1,"div",1)(2,"div",2),c(3,"app-dropdown",3),n()(),s(4,"div",1)(5,"div",2),c(6,"app-input",4),n()(),s(7,"div",1)(8,"div",2),c(9,"app-input",4),n()(),y(10,ne,21,9,"div",5),n()),o&2&&(p("formGroup",r.pasajeroForm),a(3),p("dropdownData",r.dropdowTratamiento)("formGroup",r.pasajeroForm),a(3),p("inputData",r.nombreInput)("formGroup",r.pasajeroForm),a(3),p("inputData",r.apellidoInput)("formGroup",r.pasajeroForm),a(),w(r.isFirst?10:-1))},dependencies:[F,Q,G,R,A,z,U,H,K,X,Y],styles:[".pasajero-form[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;display:flex;flex-direction:column;gap:5px;width:95%;margin:0 auto;padding:20px;box-sizing:border-box;background-color:#fff;border-radius:10px}.pasajero-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.pasajero-form__label[_ngcontent-%COMP%]{margin-bottom:5px;display:block;font-size:.9em;color:#555}.pasajero-form__input[_ngcontent-%COMP%], .pasajero-form__select[_ngcontent-%COMP%]{padding:8px;border:1px solid #ddd;border-radius:5px;font-size:14px;width:300px;max-width:300px;box-sizing:border-box;font-family:Roboto,sans-serif;margin-bottom:5px}.pasajero-form__select[_ngcontent-%COMP%]{width:300px;cursor:pointer}.pasajero-form__contacto[_ngcontent-%COMP%]{margin-top:20px;border:1px solid #eee;padding:15px;border-radius:8px;grid-column:1/3;background-color:#f9f9f9}.pasajero-form__contacto-title[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:10px;color:#2d69e1}.pasajero-form__checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px;font-size:.9em}.pasajero-form__checkbox[_ngcontent-%COMP%]{margin-right:5px}.pasajero-form__button[_ngcontent-%COMP%]{background-color:#2962ff;color:#fff;padding:8px 15px;border:none;border-radius:5px;cursor:pointer;font-size:14px;align-self:flex-start;box-shadow:0 2px 5px #0000001a;transition:background-color .2s ease}.pasajero-form__button[_ngcontent-%COMP%]:hover{background-color:#0041f5}.pasajero-form__button[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:#666;cursor:not-allowed}.pasajero-form__error[_ngcontent-%COMP%]{color:red;font-size:.8em}.error-message[_ngcontent-%COMP%]{color:red;font-size:.8em;margin-top:5px}span[_ngcontent-%COMP%]{margin-left:7px}"]})}return t})(),pe=(()=>{class t{state(e){return{$:()=>e.asObservable(),snapshot:()=>this.immutabilize(e.getValue()),set:o=>e.next(this.immutabilize(o))}}immutabilize(e){return JSON.parse(JSON.stringify(e))}static \u0275fac=function(o){return new(o||t)};static \u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),le=(()=>{class t{_factory=l(pe);passengerList$=new j([]);passengerContact$=new j(null);store(){return{passengerList:this._factory.state(this.passengerList$),passengerContact:this._factory.state(this.passengerContact$)}}static \u0275fac=function(o){return new(o||t)};static \u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),D=(()=>{class t{_passenger=l(le);get passenger(){return this._passenger.store()}static \u0275fac=function(o){return new(o||t)};static \u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),de=(()=>{class t{_state=l(D);subscriptions;passengerContact$(){return this._state.passenger.passengerContact.$()}initSubscriptions(){this.subscriptions=new v}destroySubscriptions(){this.subscriptions.unsubscribe()}execute(e){this.subscriptions.add(this._state.passenger.passengerContact.set(e))}static \u0275fac=function(o){return new(o||t)};static \u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ce=(()=>{class t{_state=l(D);subscriptions;getListPassengers$(){return this._state.passenger.passengerList.$()}initSubscriptions(){this.subscriptions=new v}destroySubscriptions(){this.subscriptions.unsubscribe()}execute(e){let o=!1,r=this._state.passenger.passengerList.snapshot().map(d=>d.id===e.id?(o=!0,e):d);r.length===0?(r.push(e),this.subscriptions.add(this._state.passenger.passengerList.set([...r]))):o?this.subscriptions.add(this._state.passenger.passengerList.set([...r])):this.subscriptions.add(this._state.passenger.passengerList.set([...r,e]))}static \u0275fac=function(o){return new(o||t)};static \u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ue=(()=>{class t{_state=l(D);subscriptions;getListPassengers$(){return this._state.passenger.passengerList.$()}initSubscriptions(){this.subscriptions=new v}destroySubscriptions(){this.subscriptions.unsubscribe()}execute(e){let o=this._state.passenger.passengerList.snapshot().map(r=>r.id===e.id?e:r);this.subscriptions.add(this._state.passenger.passengerList.set([...o]))}static \u0275fac=function(o){return new(o||t)};static \u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),me=(()=>{class t{_useCaseContact=l(de);_useCasePassengerSave=l(ce);_useCasePassengerUpdate=l(ue);_useCaseFlightSelected=l(ee);headerService=l(W);_router=l(B);contactSave$;listPassengers$;flight$;stepLabels=[];currentStepIndex=0;formData=[];passengerForms=[];isNextButtonDisabled=!0;contact;passenger;constructor(){this.headerService.sendBookingHeader({title:"Pasajeros",subtitle:"Informacion de contacto y pasajeros"})}onFormReady(e,o){this.passengerForms[o]=e,this.checkIfValid(o)}onStepChange(e){this.currentStepIndex=e,this.checkIfValid(e)}onComplete(e){this._router.navigate(["/seats"])}updateStep(e){this.isNextButtonDisabled=!e.valid,e.valid&&this.currentStepIndex===0?(this.contact={email:e.values.correo,confirmEmail:e.values.correoConfirmar,prefix:e.values.prefijoTelefono,telephoneNumber:e.values.numeroTelefono},this.passenger={id:this.currentStepIndex,treatment:e.values.tratamiento,name:e.values.nombre,lastName:e.values.apellido},C(this._useCaseContact.execute(this.contact)).pipe(x(()=>this.contactSave$)).subscribe(),C(this._useCasePassengerSave.execute(this.passenger)).pipe(x(()=>this.listPassengers$)).subscribe()):e.valid&&this.currentStepIndex!=0&&(this.passenger={id:this.currentStepIndex,treatment:e.values.tratamiento,name:e.values.nombre,lastName:e.values.apellido},C(this._useCasePassengerSave.execute(this.passenger)).pipe(x(()=>this.listPassengers$)).subscribe())}checkIfValid(e){this.passengerForms[e]&&(this.isNextButtonDisabled=!this.passengerForms[e].valid)}ngOnDestroy(){this._useCaseContact.destroySubscriptions(),this._useCasePassengerSave.destroySubscriptions(),this._useCasePassengerUpdate.destroySubscriptions(),this._useCaseFlightSelected.destroySubscription()}ngOnInit(){this._useCaseContact.initSubscriptions(),this._useCasePassengerSave.initSubscriptions(),this._useCasePassengerUpdate.initSubscriptions(),this._useCaseFlightSelected.initSubscription(),this.contactSave$=this._useCaseContact.passengerContact$(),this.listPassengers$=this._useCasePassengerSave.getListPassengers$(),this.flight$=this._useCaseFlightSelected.flight$(),this.flight$.subscribe(e=>{let o=e.filters?.adults;for(let r=0;r<o;r++)this.stepLabels.push(`Adulto ${r+1}`)})}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=S({type:t,selectors:[["lib-pasajeros"]],decls:3,vars:2,consts:[[3,"complete","stepChange","steps","isNextButtonDisabled"],[3,"isFirst","hidden"],[3,"formValuesChange","formReady","isFirst","hidden"]],template:function(o,r){o&1&&(s(0,"lib-stepper",0),_("complete",function(h){return r.onComplete(h)})("stepChange",function(h){return r.onStepChange(h)}),k(1,se,1,2,"lib-passenger-form",1,O),n()),o&2&&(p("steps",r.stepLabels)("isNextButtonDisabled",r.isNextButtonDisabled),a(),$(r.stepLabels))},dependencies:[ie,ae,F],encapsulation:2})}return t})(),Me=[{path:"",component:Z,children:[{path:"",component:me}]}];export{de as a,ce as b,Me as c};
